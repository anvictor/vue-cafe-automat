# ‚òï Vue Cafe Automat

–°–∏–º—É–ª—è—Ç–æ—Ä –∫–∞–≤–æ–≤–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∞ –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é Google Sheets –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö.

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

- Node.js 18+
- npm –∞–±–æ yarn
- Google Account (–¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ Google Sheets)

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
# 1. –ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
git clone <repository-url>
cd vue-cafe-automat

# 2. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
npm install
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Google Sheets (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

–Ø–∫—â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤ Google Sheets:

1. **–°—Ç–≤–æ—Ä—ñ—Ç—å Google Spreadsheet**
   - –í—ñ–¥–∫—Ä–∏–π—Ç–µ [Google Sheets](https://sheets.google.com)
   - –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤—É —Ç–∞–±–ª–∏—Ü—é

2. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ Apps Script –¥–ª—è Warehouse**
   - Extensions ‚Üí Apps Script
   - –°–∫–æ–ø—ñ—é–π—Ç–µ –∫–æ–¥ –∑ `server/google-apps-script/warehouse.gs`
   - Deploy ‚Üí New deployment ‚Üí Web app
   - Execute as: **Me**
   - Who has access: **Anyone**
   - –°–∫–æ–ø—ñ—é–π—Ç–µ Web App URL

3. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ Apps Script –¥–ª—è Client Resources**
   - –£ —Ç—ñ–π –∂–µ —Ç–∞–±–ª–∏—Ü—ñ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç
   - –°–∫–æ–ø—ñ—é–π—Ç–µ –∫–æ–¥ –∑ `server/google-apps-script/client-resources.gs`
   - Deploy ‚Üí New deployment ‚Üí Web app
   - –°–∫–æ–ø—ñ—é–π—Ç–µ Web App URL

4. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è**

   ```bash
   # –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª .env.development
   cp .env.example .env.development
   ```

   –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `.env.development`:

   ```env
   VITE_WS_URL=ws://localhost:3001
   VITE_APPS_SCRIPT_URL=<–≤–∞—à_warehouse_url>
   VITE_CLIENT_RESOURCES_URL=<–≤–∞—à_client_resources_url>
   ```

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç—É

#### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ –≤—Å—å–æ–≥–æ –æ–¥–Ω–æ—á–∞—Å–Ω–æ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ) üöÄ

```bash
npm run dev:all
```

–¶–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ñ —Ç—Ä–∏ —Å–µ—Ä–≤—ñ—Å–∏ –≤ –æ–¥–Ω–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ:

- üîµ Frontend (Vite) - `http://localhost:5175`
- üü¢ WebSocket —Å–µ—Ä–≤–µ—Ä - `http://localhost:3001`
- üü° CORS Proxy - `http://localhost:3002`

#### –í–∞—Ä—ñ–∞–Ω—Ç 2: –û–∫—Ä–µ–º—ñ —Ç–µ—Ä–º—ñ–Ω–∞–ª–∏

–í—ñ–¥–∫—Ä–∏–π—Ç–µ **3 —Ç–µ—Ä–º—ñ–Ω–∞–ª–∏** —ñ –∑–∞–ø—É—Å—Ç—ñ—Ç—å:

**–¢–µ—Ä–º—ñ–Ω–∞–ª 1: WebSocket —Å–µ—Ä–≤–µ—Ä**

```bash
npm run dev:server
```

**–¢–µ—Ä–º—ñ–Ω–∞–ª 2: CORS Proxy** (–ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–ª—è Google Sheets)

```bash
npm run dev:proxy
```

**–¢–µ—Ä–º—ñ–Ω–∞–ª 3: Frontend**

```bash
npm run dev:vite
```

> **–ü—Ä–∏–º—ñ—Ç–∫–∞:** –Ø–∫—â–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ Google Sheets, –º–æ–∂–µ—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ CORS Proxy

## üì± –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —á–∞—Å—Ç–∏–Ω–∞

–í—ñ–¥–∫—Ä–∏–π—Ç–µ: `http://localhost:5175/`

1. **–í–Ω–µ—Å—ñ—Ç—å –≥—Ä–æ—à—ñ** - –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ö–∏–Ω—É—Ç–∏ –ú–æ–Ω–µ—Ç—É" (‚Ç¨0.10 –∑–∞ —Ä–∞–∑)
2. **–í–∏–±–µ—Ä—ñ—Ç—å –∫–∞–≤—É** - –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–∞—Ä—Ç–∫—É –∑ –Ω–∞–ø–æ—î–º
3. **–ü—Ä–∏–≥–æ—Ç—É–π—Ç–µ** - –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ü—Ä–∏–≥–æ—Ç—É–≤–∞—Ç–∏"
4. **–ó–∞–±–µ—Ä—ñ—Ç—å –∫–∞–≤—É** - –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –≥–æ—Ç–æ–≤—É –∫–∞–≤—É
5. **–ó–¥–∞—á–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è

### –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å

–í—ñ–¥–∫—Ä–∏–π—Ç–µ: `http://localhost:5175/admin`

1. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å—ñ–≤** - –ø–µ—Ä–µ–≥–ª—è–¥ –ø–æ—Ç–æ—á–Ω–∏—Ö –∑–∞–ø–∞—Å—ñ–≤ –∞–≤—Ç–æ–º–∞—Ç–∞
2. **–°–∫–ª–∞–¥** - –∫—É–ø—ñ–≤–ª—è —Ä–µ—Å—É—Ä—Å—ñ–≤ –¥–ª—è —Å–∫–ª–∞–¥—É
3. **–ü–æ–ø–æ–≤–Ω–µ–Ω–Ω—è** - –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ –∑—ñ —Å–∫–ª–∞–¥—É –≤ –∞–≤—Ç–æ–º–∞—Ç

## üåç –ú–æ–≤–∏

–ü—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è –º–æ–≤–∏:

- üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞
- üá¨üáß English
- üá™üá∏ Espa√±ol

–ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤–∏ —É –≤–µ—Ä—Ö–Ω—å–æ–º—É –ø—Ä–∞–≤–æ–º—É –∫—É—Ç—ñ.

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
vue-cafe-automat/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Admin/          # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Client/         # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–æ—ó —á–∞—Å—Ç–∏–Ω–∏
‚îÇ   ‚îú‚îÄ‚îÄ stores/             # Pinia stores (—Å—Ç–∞–Ω –¥–æ–¥–∞—Ç–∫—É)
‚îÇ   ‚îú‚îÄ‚îÄ services/           # API –∫–ª—ñ—î–Ω—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ data/               # –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏, i18n
‚îÇ   ‚îú‚îÄ‚îÄ types/              # TypeScript —Ç–∏–ø–∏
‚îÇ   ‚îî‚îÄ‚îÄ views/              # –ì–æ–ª–æ–≤–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îú‚îÄ‚îÄ server.ts           # WebSocket —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ proxy.ts            # CORS proxy
‚îÇ   ‚îî‚îÄ‚îÄ google-apps-script/ # Apps Script –∫–æ–¥–∏
‚îî‚îÄ‚îÄ public/                 # –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏
```

## üîß –î–æ—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –†–æ–∑—Ä–æ–±–∫–∞
npm run dev              # Frontend
npm run dev:server       # WebSocket server

# –ë—ñ–ª–¥
npm run build           # Production build
npm run preview         # Preview production build

# –Ü–Ω—à–µ
npm run type-check      # TypeScript –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
npx tsx server/proxy.ts # CORS proxy
```

## üìä –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Google Sheets

### –©–æ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è

**Warehouse Sheet:**

- –ó–∞–ø–∞—Å–∏ —Å–∫–ª–∞–¥—É (–≤–æ–¥–∞, –∫–∞–≤–∞, –º–æ–ª–æ–∫–æ, —Å—Ç–∞–∫–∞–Ω—á–∏–∫–∏, –º—ñ—à–∞–ª–∫–∏, —Ü—É–∫–æ—Ä)
- –û–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—Ä–∏ –∫—É–ø—ñ–≤–ª—ñ —Ç–∞ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—ñ –∞–≤—Ç–æ–º–∞—Ç–∞

**ClientResources Sheet:**

- –ó–∞–ø–∞—Å–∏ –∞–≤—Ç–æ–º–∞—Ç–∞
- –û–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—Ä–∏ –ø—Ä–∏–≥–æ—Ç—É–≤–∞–Ω–Ω—ñ –∫–∞–≤–∏ —Ç–∞ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—ñ

### –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

```
Frontend ‚Üí CORS Proxy ‚Üí Google Apps Script ‚Üí Google Sheets
```

1. Frontend –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –∑–∞–ø–∏—Ç –¥–æ proxy
2. Proxy –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –¥–æ Apps Script (–æ–±—Ö–æ–¥–∏—Ç—å CORS)
3. Apps Script —á–∏—Ç–∞—î/–ø–∏—à–µ –¥–∞–Ω—ñ –≤ Google Sheets
4. –í—ñ–¥–ø–æ–≤—ñ–¥—å –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –Ω–∞–∑–∞–¥ –¥–æ frontend

## üêõ Troubleshooting

### –ü–æ–º–∏–ª–∫–∞ CORS

**–ü—Ä–æ–±–ª–µ–º–∞:** `Access to fetch blocked by CORS policy`

**–†—ñ—à–µ–Ω–Ω—è:**

```bash
# –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ proxy –∑–∞–ø—É—â–µ–Ω–∏–π
npx tsx server/proxy.ts
```

### WebSocket –Ω–µ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `WebSocket connection failed`

**–†—ñ—à–µ–Ω–Ω—è:**

```bash
# –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ WebSocket —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π
npm run dev:server
```

### Google Sheets –Ω–µ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞–Ω—ñ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è

**–†—ñ—à–µ–Ω–Ω—è:**

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `.env.development` - —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ URLs
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Apps Script - —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–¥–µ–ø–ª–æ—î–Ω–æ
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –ø–æ–º–∏–ª–∫–∏

### –ü–æ—Ä—Ç –∑–∞–π–Ω—è—Ç–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:** `Port 5175 is already in use`

**–†—ñ—à–µ–Ω–Ω—è:**

```bash
# –ó–Ω–∞–π–¥—ñ—Ç—å –ø—Ä–æ—Ü–µ—Å
lsof -i :5175

# –í–±–∏–π—Ç–µ –ø—Ä–æ—Ü–µ—Å
kill -9 <PID>
```

## üìù Production Deployment

### Frontend (Vercel/Netlify)

1. Build –ø—Ä–æ–µ–∫—Ç—É:

```bash
npm run build
```

2. Deploy –ø–∞–ø–∫—É `dist/`

3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è:

```env
VITE_WS_URL=wss://your-websocket-server.com
VITE_APPS_SCRIPT_URL=https://script.google.com/.../exec
VITE_CLIENT_RESOURCES_URL=https://script.google.com/.../exec
```

### WebSocket Server (Render/Railway)

1. Deploy `server/server.ts`
2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å PORT –∑–º—ñ–Ω–Ω—É –æ—Ç–æ—á–µ–Ω–Ω—è
3. –û–Ω–æ–≤—ñ—Ç—å `VITE_WS_URL` —É frontend

> **–ü—Ä–∏–º—ñ—Ç–∫–∞:** CORS proxy –ù–ï –ø–æ—Ç—Ä—ñ–±–µ–Ω –≤ production - Google Apps Script –¥–æ–∑–≤–æ–ª—è—î HTTPS –∑–∞–ø–∏—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

## üéØ –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- ‚úÖ –†–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∞ —Å–∏–º—É–ª—è—Ü—ñ—è –∫–∞–≤–æ–≤–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∞
- ‚úÖ –†–µ–∞–ª-—Ç–∞–π–º —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ WebSocket
- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤ Google Sheets
- ‚úÖ –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
- ‚úÖ –ë–∞–≥–∞—Ç–æ–º–æ–≤–Ω—ñ—Å—Ç—å (UA/EN/ES)
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω
- ‚úÖ TypeScript –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–ø–µ–∫–∏
- ‚úÖ –û–ø—Ç–∏–º—ñ—Å—Ç–∏—á–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è UI

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

Viktor Andreichenko
